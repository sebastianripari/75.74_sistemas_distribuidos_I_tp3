version: '3'
services:

  client:
    image: rust_process:latest
    entrypoint: /tp2/target/release/client
    networks:
      - tp3_net

  server:
    image: rust_process:latest
    entrypoint: /tp2/target/release/server
    networks:
      - tp3_net

  worker_avg:
    image: rust_process:latest
    entrypoint: /tp2/target/release/worker_avg
    networks:
      - tp3_net

  worker_map:
    image: rust_process:latest
    entrypoint: /tp2/target/release/worker_map
    networks:
      - tp3_net

  worker_filter_students:
    image: rust_process:latest
    entrypoint: /tp2/target/release/worker_filter_students
    networks:
      - tp3_net

  worker_filter_score:
    image: rust_process:latest
    entrypoint: /tp2/target/release/worker_filter_score
    networks:
      - tp3_net
  
  worker_join:
    image: rust_process:latest
    entrypoint: /tp2/target/release/worker_join
    networks:
      - tp3_net

  worker_group_by:
    image: rust_process:latest
    entrypoint: /tp2/target/release/worker_group_by
    networks:
      - tp3_net

networks:
  tp3_net:
    ipam:
      driver: default
      config:
        - subnet: 172.25.125.0/24

